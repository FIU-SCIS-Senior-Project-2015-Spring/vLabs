#!/bin/bash

# Routers communicate with the host through vmnet99
#mknod /dev/vmnet99 c 119 99

# Virtual labs use vmnets 20 and up
#mknod /dev/vmnet20 c 119 20

#mknod /dev/vmnet21 c 119 21
#mknod /dev/vmnet22 c 119 22
#mknod /dev/vmnet23 c 119 23

# vmnet99 configuration
#/usr/bin/vmnet-netifup -d /var/run/vmnet-netifup-vmnet99.pid /dev/vmnet99 vmnet99
#/sbin/ifconfig vmnet99 172.16.48.1 netmask 255.255.255.0 broadcast 172.16.48.255 up
#echo 1 > /proc/sys/net/ipv4/ip_forward

#/sbin/iptables -A FORWARD -i eth0 -o vmnet99 -d 172.16.48.0/24 -j ACCEPT
#/sbin/iptables -A FORWARD -i vmnet99 -o eth0 -s 172.16.48.0/24 -j ACCEPT

/sbin/route del -net 172.16.48.0 netmask 255.255.255.0 dev vmnet13

#/sbin/iptables -t nat -A POSTROUTING -s 172.16.48.0/24 -d ! 172.16.48.0 -j MASQUERADE
#/sbin/iptables -A FORWARD -i eth0 -o vmnet99 -j ACCEPT
#/sbin/iptables -A FORWARD -i vmnet99 -o eth0 -j ACCEPT
/sbin/iptables -v -L
/sbin/iptables -t nat -v -L
